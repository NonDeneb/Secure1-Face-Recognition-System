为用户 20250324151804bdu6aefzbYqRzD5 生成密钥
开始生成加密密钥...
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
密钥生成完毕 - 已创建公钥、私钥、重线性化密钥和Galois密钥
临时目录已创建: /tmp/tmpjm2rvbyc
密钥已保存到临时文件
密钥已读取 - 公钥大小: 134106字节, 私钥大小: 70212字节
临时文件已清理
密钥生成过程完成
用户 20250324151804bdu6aefzbYqRzD5 密钥生成成功
加密用户 20250324151804bdu6aefzbYqRzD5 的 old 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134106字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpa2n8_l3x
公钥已保存到临时文件: /tmp/tmpa2n8_l3x/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88585字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88585字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
加密用户 20250324151804bdu6aefzbYqRzD5 的 new 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134106字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpzr96kidn
公钥已保存到临时文件: /tmp/tmpzr96kidn/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88595字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88595字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
成功读取私钥，大小: 70212字节
成功读取重线性化密钥，大小: 276774字节
成功读取Galois密钥，大小: 6070343字节
成功读取旧加密数据，大小: 88585字节
成功读取新加密数据，大小: 88595字节
调用SEAL比对函数
开始比较加密数据 - 使用全同态加密实现
输入数据长度: data1=88585字节, data2=88595字节
私钥长度: 70212字节
重线性化密钥长度: 276774字节
Galois密钥长度: 6070343字节
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文创建成功
创建临时目录: /tmp/tmpmosd5hol
密钥保存到临时文件成功
私钥加载成功
重线性化密钥加载成功
Galois密钥加载成功
解密器创建成功
密文数据保存到临时文件成功
密文加载成功
密文解密成功
解码后向量长度: vec1=4096, vec2=4096
整数向量已转换为浮点数向量，使用缩放因子: 10000
欧氏距离计算结果: 0.586239993518013
计算向量内积: 0.82819577, 范数1: 1.0000083849648462, 范数2: 1.0000260496607076
余弦相似度计算结果: 0.8281672521898821
余弦距离: 0.18938373209003828
归一化距离: 0.293114950107231
最终相似度计算结果: 0.706885049892769
***** 比较结果摘要 *****
欧氏距离: 0.586239993518013
余弦相似度: 0.8281672521898821
余弦距离: 0.18938373209003828
归一化距离: 0.293114950107231
最终相似度: 0.706885049892769
向量1范数: 1.0000083849648462
向量2范数: 1.0000260496607076
***********************
临时文件清理完成
比对完成，结果: 0.706885049892769
为用户 20250324151804bdu6aefzbYqRzD5 生成密钥
开始生成加密密钥...
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
密钥生成完毕 - 已创建公钥、私钥、重线性化密钥和Galois密钥
临时目录已创建: /tmp/tmpn9vqs4pk
密钥已保存到临时文件
密钥已读取 - 公钥大小: 134098字节, 私钥大小: 70240字节
临时文件已清理
密钥生成过程完成
用户 20250324151804bdu6aefzbYqRzD5 密钥生成成功
为用户 20250324151804bdu6aefzbYqRzD5 生成密钥
开始生成加密密钥...
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
密钥生成完毕 - 已创建公钥、私钥、重线性化密钥和Galois密钥
临时目录已创建: /tmp/tmpw5m_g8of
密钥已保存到临时文件
密钥已读取 - 公钥大小: 134073字节, 私钥大小: 70207字节
临时文件已清理
密钥生成过程完成
用户 20250324151804bdu6aefzbYqRzD5 密钥生成成功
加密用户 20250324151804bdu6aefzbYqRzD5 的 old 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134073字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpb9vv6yqt
公钥已保存到临时文件: /tmp/tmpb9vv6yqt/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88515字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88515字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
加密用户 20250324151804bdu6aefzbYqRzD5 的 new 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134073字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmp_cvpji42
公钥已保存到临时文件: /tmp/tmp_cvpji42/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88583字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88583字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
成功读取私钥，大小: 70207字节
成功读取重线性化密钥，大小: 276683字节
成功读取Galois密钥，大小: 6070513字节
成功读取旧加密数据，大小: 88515字节
成功读取新加密数据，大小: 88583字节
调用SEAL比对函数
开始比较加密数据 - 使用混合同态加密实现
输入数据长度: data1=88515字节, data2=88583字节
私钥长度: 70207字节
重线性化密钥长度: 276683字节
Galois密钥长度: 6070513字节
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文创建成功
创建临时目录: /tmp/tmp7gsef3af
密钥保存到临时文件成功
私钥加载成功
重线性化密钥加载成功
Galois密钥加载成功
同态计算评估器创建成功
密文数据保存到临时文件成功
密文加载成功
开始执行同态计算
临时文件清理完成
混合同态加密比较出错: sub(): incompatible function arguments. The following argument types are supported:
    1. (self: seal.Evaluator, arg0: seal.Ciphertext, arg1: seal.Ciphertext) -> seal.Ciphertext

Invoked with: <seal.Evaluator object at 0x7fa08af1c5a8>, <seal.Ciphertext object at 0x7fa08af1c1b8>, <seal.Ciphertext object at 0x7fa08af1cae8>, <seal.Ciphertext object at 0x7fa08af1c538>
由于错误，返回随机相似度: 0.7841033219643911
比对完成，结果: 0.7841033219643911
加密用户 20250324151804bdu6aefzbYqRzD5 的 old 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134073字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpy5v_6diz
公钥已保存到临时文件: /tmp/tmpy5v_6diz/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88563字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88563字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
加密用户 20250324151804bdu6aefzbYqRzD5 的 new 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134073字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmp9shvhqvp
公钥已保存到临时文件: /tmp/tmp9shvhqvp/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88532字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88532字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
成功读取私钥，大小: 70207字节
成功读取重线性化密钥，大小: 276683字节
成功读取Galois密钥，大小: 6070513字节
成功读取旧加密数据，大小: 88563字节
成功读取新加密数据，大小: 88532字节
调用SEAL比对函数
开始比较加密数据 - 使用混合同态加密实现
输入数据长度: data1=88563字节, data2=88532字节
私钥长度: 70207字节
重线性化密钥长度: 276683字节
Galois密钥长度: 6070513字节
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文创建成功
创建临时目录: /tmp/tmpg1v6kak7
密钥保存到临时文件成功
私钥加载成功
重线性化密钥加载成功
Galois密钥加载成功
同态计算评估器创建成功
密文数据保存到临时文件成功
密文加载成功
开始执行同态计算
临时文件清理完成
混合同态加密比较出错: sub(): incompatible function arguments. The following argument types are supported:
    1. (self: seal.Evaluator, arg0: seal.Ciphertext, arg1: seal.Ciphertext) -> seal.Ciphertext

Invoked with: <seal.Evaluator object at 0x7fa06e19d3b0>, <seal.Ciphertext object at 0x7fa06e124c70>, <seal.Ciphertext object at 0x7fa06e124c00>, <seal.Ciphertext object at 0x7fa06e124a78>
由于错误，返回随机相似度: 0.796570731974973
比对完成，结果: 0.796570731974973
为用户 20250324151804bdu6aefzbYqRzD5 生成密钥
开始生成加密密钥...
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
密钥生成完毕 - 已创建公钥、私钥、重线性化密钥和Galois密钥
临时目录已创建: /tmp/tmpl2vxy1d2
密钥已保存到临时文件
密钥已读取 - 公钥大小: 134117字节, 私钥大小: 70179字节
临时文件已清理
密钥生成过程完成
用户 20250324151804bdu6aefzbYqRzD5 密钥生成成功
加密用户 20250324151804bdu6aefzbYqRzD5 的 old 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134117字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpcsoj20ta
公钥已保存到临时文件: /tmp/tmpcsoj20ta/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88502字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88502字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
加密用户 20250324151804bdu6aefzbYqRzD5 的 new 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134117字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmp87r5t3n_
公钥已保存到临时文件: /tmp/tmp87r5t3n_/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88525字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88525字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
成功读取私钥，大小: 70179字节
成功读取重线性化密钥，大小: 276841字节
成功读取Galois密钥，大小: 6069761字节
成功读取旧加密数据，大小: 88502字节
成功读取新加密数据，大小: 88525字节
调用SEAL比对函数
开始比较加密数据 - 使用混合同态加密实现
输入数据长度: data1=88502字节, data2=88525字节
私钥长度: 70179字节
重线性化密钥长度: 276841字节
Galois密钥长度: 6069761字节
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文创建成功
创建临时目录: /tmp/tmptkow8hcy
密钥保存到临时文件成功
私钥加载成功
重线性化密钥加载成功
Galois密钥加载成功
同态计算评估器创建成功
密文数据保存到临时文件成功
密文加载成功
开始执行同态计算
同态计算: 成功计算两个密文向量的差
同态计算: 成功计算差值向量的平方
部分解密: 获取差值平方向量，长度=4096
混合计算: 差值平方和=43131131.0
混合计算: 欧氏距离=6.567429558053896e-05
混合计算: 向量1模长=0.6335891334295436, 向量2模长=0.6653229140800728
混合计算: 向量内积=0.2992866
混合计算: 余弦相似度=0.70998156362726
混合计算: 余弦距离=0.24870324825209492
混合计算: 归一化距离=5.056100273028898e-05
混合计算: 最终相似度=0.9999494389972697
***** 混合同态加密比较结果摘要 *****
欧氏距离: 6.567429558053896e-05
余弦相似度: 0.70998156362726
余弦距离: 0.24870324825209492
归一化距离: 5.056100273028898e-05
最终相似度: 0.9999494389972697
向量1范数: 0.6335891334295436
向量2范数: 0.6653229140800728
***********************
临时文件清理完成
比对完成，结果: 0.9999494389972697
加密用户 20250324151804bdu6aefzbYqRzD5 的 old 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134117字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpn_n6yt2w
公钥已保存到临时文件: /tmp/tmpn_n6yt2w/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88564字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88564字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
加密用户 20250324151804bdu6aefzbYqRzD5 的 new 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134117字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpn3nfyjpq
公钥已保存到临时文件: /tmp/tmpn3nfyjpq/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88519字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88519字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
成功读取私钥，大小: 70179字节
成功读取重线性化密钥，大小: 276841字节
成功读取Galois密钥，大小: 6069761字节
成功读取旧加密数据，大小: 88564字节
成功读取新加密数据，大小: 88519字节
调用SEAL比对函数
开始比较加密数据 - 使用混合同态加密实现
输入数据长度: data1=88564字节, data2=88519字节
私钥长度: 70179字节
重线性化密钥长度: 276841字节
Galois密钥长度: 6069761字节
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文创建成功
创建临时目录: /tmp/tmpscqgcku1
密钥保存到临时文件成功
私钥加载成功
重线性化密钥加载成功
Galois密钥加载成功
同态计算评估器创建成功
密文数据保存到临时文件成功
密文加载成功
开始执行同态计算
同态计算: 成功计算两个密文向量的差
同态计算: 成功计算差值向量的平方
部分解密: 获取差值平方向量，长度=4096
混合计算: 差值平方和=35792377.0
混合计算: 欧氏距离=5.982673064776312e-05
混合计算: 向量1模长=0.6335891334295436, 向量2模长=0.6252841194209237
混合计算: 向量内积=0.06757784
混合计算: 余弦相似度=0.1705764953647287
混合计算: 余弦距离=0.4454370033511084
混合计算: 归一化距离=4.752403032815054e-05
混合计算: 最终相似度=0.9999524759696719
***** 混合同态加密比较结果摘要 *****
欧氏距离: 5.982673064776312e-05
余弦相似度: 0.1705764953647287
余弦距离: 0.4454370033511084
归一化距离: 4.752403032815054e-05
最终相似度: 0.9999524759696719
向量1范数: 0.6335891334295436
向量2范数: 0.6252841194209237
***********************
临时文件清理完成
比对完成，结果: 0.9999524759696719
为用户 20250324151804bdu6aefzbYqRzD5 生成密钥
开始生成加密密钥...
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
密钥生成完毕 - 已创建公钥、私钥、重线性化密钥和Galois密钥
临时目录已创建: /tmp/tmp72rfghh6
密钥已保存到临时文件
密钥已读取 - 公钥大小: 134113字节, 私钥大小: 70240字节
临时文件已清理
密钥生成过程完成
用户 20250324151804bdu6aefzbYqRzD5 密钥生成成功
加密用户 20250324151804bdu6aefzbYqRzD5 的 old 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134113字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpf4qmsazz
公钥已保存到临时文件: /tmp/tmpf4qmsazz/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88509字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88509字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
加密用户 20250324151804bdu6aefzbYqRzD5 的 new 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134113字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpz3tcje45
公钥已保存到临时文件: /tmp/tmpz3tcje45/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88554字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88554字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
成功读取私钥，大小: 70240字节
成功读取重线性化密钥，大小: 276817字节
成功读取Galois密钥，大小: 6070434字节
成功读取旧加密数据，大小: 88509字节
成功读取新加密数据，大小: 88554字节
调用SEAL比对函数
开始比较加密数据 - 使用混合同态加密实现
输入数据长度: data1=88509字节, data2=88554字节
私钥长度: 70240字节
重线性化密钥长度: 276817字节
Galois密钥长度: 6070434字节
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文创建成功
创建临时目录: /tmp/tmp2qr83qfd
密钥保存到临时文件成功
私钥加载成功
重线性化密钥加载成功
Galois密钥加载成功
同态计算评估器创建成功
密文数据保存到临时文件成功
密文加载成功
开始执行同态计算
同态计算: 成功计算两个密文向量的差
同态计算: 成功计算差值向量的平方
部分解密: 获取差值平方向量，长度=4096
混合计算: 差值平方和=43131131.0
混合计算: 欧氏距离=0.6567429558053897
混合计算: 向量1模长=0.6335891334295436, 向量2模长=0.6653229140800728
混合计算: 向量内积=0.2992866
混合计算: 余弦相似度=0.70998156362726
混合计算: 余弦距离=0.24870324825209492
混合计算: 归一化欧氏距离=0.4378286372035931
混合计算: 最终相似度=0.6378215183770062
***** 混合同态加密比较结果摘要 *****
欧氏距离: 0.6567429558053897
余弦相似度: 0.70998156362726
余弦距离: 0.24870324825209492
归一化欧氏距离: 0.4378286372035931
最终相似度: 0.6378215183770062
向量1范数: 0.6335891334295436
向量2范数: 0.6653229140800728
***********************
临时文件清理完成
比对完成，结果: 0.6378215183770062
加密用户 20250324151804bdu6aefzbYqRzD5 的 old 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134113字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmp1taatxta
公钥已保存到临时文件: /tmp/tmp1taatxta/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88516字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88516字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
加密用户 20250324151804bdu6aefzbYqRzD5 的 new 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134113字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpqs0oohyr
公钥已保存到临时文件: /tmp/tmpqs0oohyr/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88535字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88535字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
成功读取私钥，大小: 70240字节
成功读取重线性化密钥，大小: 276817字节
成功读取Galois密钥，大小: 6070434字节
成功读取旧加密数据，大小: 88516字节
成功读取新加密数据，大小: 88535字节
调用SEAL比对函数
开始比较加密数据 - 使用混合同态加密实现
输入数据长度: data1=88516字节, data2=88535字节
私钥长度: 70240字节
重线性化密钥长度: 276817字节
Galois密钥长度: 6070434字节
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文创建成功
创建临时目录: /tmp/tmpvsgngn01
密钥保存到临时文件成功
私钥加载成功
重线性化密钥加载成功
Galois密钥加载成功
同态计算评估器创建成功
密文数据保存到临时文件成功
密文加载成功
开始执行同态计算
同态计算: 成功计算两个密文向量的差
同态计算: 成功计算差值向量的平方
部分解密: 获取差值平方向量，长度=4096
混合计算: 差值平方和=43131131.0
混合计算: 欧氏距离=0.6567429558053897
混合计算: 向量1模长=0.6335891334295436, 向量2模长=0.6653229140800728
混合计算: 向量内积=0.2992866
混合计算: 余弦相似度=0.70998156362726
混合计算: 余弦距离=0.24870324825209492
混合计算: 归一化欧氏距离=0.4378286372035931
混合计算: 最终相似度=0.6378215183770062
***** 混合同态加密比较结果摘要 *****
欧氏距离: 0.6567429558053897
余弦相似度: 0.70998156362726
余弦距离: 0.24870324825209492
归一化欧氏距离: 0.4378286372035931
最终相似度: 0.6378215183770062
向量1范数: 0.6335891334295436
向量2范数: 0.6653229140800728
***********************
临时文件清理完成
比对完成，结果: 0.6378215183770062
加密用户 20250324151804bdu6aefzbYqRzD5 的 old 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134113字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpt2bmwmyu
公钥已保存到临时文件: /tmp/tmpt2bmwmyu/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88505字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88505字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
加密用户 20250324151804bdu6aefzbYqRzD5 的 new 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134113字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmp0eh_4a29
公钥已保存到临时文件: /tmp/tmp0eh_4a29/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88538字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88538字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
成功读取私钥，大小: 70240字节
成功读取重线性化密钥，大小: 276817字节
成功读取Galois密钥，大小: 6070434字节
成功读取旧加密数据，大小: 88505字节
成功读取新加密数据，大小: 88538字节
调用SEAL比对函数
开始比较加密数据 - 使用混合同态加密实现
输入数据长度: data1=88505字节, data2=88538字节
私钥长度: 70240字节
重线性化密钥长度: 276817字节
Galois密钥长度: 6070434字节
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文创建成功
创建临时目录: /tmp/tmpg1h_6xk3
密钥保存到临时文件成功
私钥加载成功
重线性化密钥加载成功
Galois密钥加载成功
同态计算评估器创建成功
密文数据保存到临时文件成功
密文加载成功
开始执行同态计算
同态计算: 成功计算两个密文向量的差
同态计算: 成功计算差值向量的平方
部分解密: 获取差值平方向量，长度=4096
混合计算: 差值平方和=35792377.0
混合计算: 欧氏距离=0.5982673064776313
混合计算: 向量1模长=0.6335891334295436, 向量2模长=0.6252841194209237
混合计算: 向量内积=0.06757784
混合计算: 余弦相似度=0.1705764953647287
混合计算: 余弦距离=0.4454370033511084
混合计算: 归一化欧氏距离=0.39884487098508753
混合计算: 最终相似度=0.5825182760685041
***** 混合同态加密比较结果摘要 *****
欧氏距离: 0.5982673064776313
余弦相似度: 0.1705764953647287
余弦距离: 0.4454370033511084
归一化欧氏距离: 0.39884487098508753
最终相似度: 0.5825182760685041
向量1范数: 0.6335891334295436
向量2范数: 0.6252841194209237
***********************
临时文件清理完成
比对完成，结果: 0.5825182760685041
加密用户 20250324151804bdu6aefzbYqRzD5 的 old 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134113字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpe038t7e_
公钥已保存到临时文件: /tmp/tmpe038t7e_/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88560字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88560字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
加密用户 20250324151804bdu6aefzbYqRzD5 的 new 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134113字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpnp7w61hv
公钥已保存到临时文件: /tmp/tmpnp7w61hv/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88505字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88505字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
成功读取私钥，大小: 70240字节
成功读取重线性化密钥，大小: 276817字节
成功读取Galois密钥，大小: 6070434字节
成功读取旧加密数据，大小: 88560字节
成功读取新加密数据，大小: 88505字节
调用SEAL比对函数
开始比较加密数据 - 使用混合同态加密实现
输入数据长度: data1=88560字节, data2=88505字节
私钥长度: 70240字节
重线性化密钥长度: 276817字节
Galois密钥长度: 6070434字节
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文创建成功
创建临时目录: /tmp/tmpmakniubp
密钥保存到临时文件成功
私钥加载成功
重线性化密钥加载成功
Galois密钥加载成功
同态计算评估器创建成功
密文数据保存到临时文件成功
密文加载成功
开始执行同态计算
同态计算: 成功计算两个密文向量的差
同态计算: 成功计算差值向量的平方
部分解密: 获取差值平方向量，长度=4096
混合计算: 差值平方和=46332158.0
混合计算: 欧氏距离=0.6806772950525087
混合计算: 向量1模长=0.6335891334295436, 向量2模长=0.6496337583592774
混合计算: 向量内积=0.14394206
混合计算: 余弦相似度=0.3497127034834651
混合计算: 余弦距离=0.3862792011781608
混合计算: 归一化欧氏距离=0.4537848633683392
混合计算: 最终相似度=0.5732174015077321
***** 混合同态加密比较结果摘要 *****
欧氏距离: 0.6806772950525087
余弦相似度: 0.3497127034834651
余弦距离: 0.3862792011781608
归一化欧氏距离: 0.4537848633683392
最终相似度: 0.5732174015077321
向量1范数: 0.6335891334295436
向量2范数: 0.6496337583592774
***********************
临时文件清理完成
比对完成，结果: 0.5732174015077321
为用户 20250324151804bdu6aefzbYqRzD5 生成密钥
开始生成加密密钥...
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
密钥生成完毕 - 已创建公钥、私钥、重线性化密钥和Galois密钥
临时目录已创建: /tmp/tmp07nymfdj
密钥已保存到临时文件
密钥已读取 - 公钥大小: 134039字节, 私钥大小: 70211字节
临时文件已清理
密钥生成过程完成
用户 20250324151804bdu6aefzbYqRzD5 密钥生成成功
加密用户 20250324151804bdu6aefzbYqRzD5 的 old 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134039字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmphuycwvon
公钥已保存到临时文件: /tmp/tmphuycwvon/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88589字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88589字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
加密用户 20250324151804bdu6aefzbYqRzD5 的 new 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134039字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpkp1jl3hw
公钥已保存到临时文件: /tmp/tmpkp1jl3hw/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88486字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88486字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
成功读取私钥，大小: 70211字节
成功读取重线性化密钥，大小: 276767字节
成功读取Galois密钥，大小: 6070088字节
成功读取旧加密数据，大小: 88589字节
成功读取新加密数据，大小: 88486字节
调用SEAL比对函数
开始比较加密数据 - 使用混合同态加密实现
输入数据长度: data1=88589字节, data2=88486字节
私钥长度: 70211字节
重线性化密钥长度: 276767字节
Galois密钥长度: 6070088字节
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文创建成功
创建临时目录: /tmp/tmpu86qpadf
密钥保存到临时文件成功
私钥加载成功
重线性化密钥加载成功
Galois密钥加载成功
同态计算评估器创建成功
密文数据保存到临时文件成功
密文加载成功
开始执行同态计算
同态计算: 成功计算两个密文向量的差
同态计算: 成功计算差值向量的平方
部分解密: 获取差值平方向量，长度=4096
混合计算: 差值平方和=33311191.0
混合计算: 欧氏距离=0.5771584791025771
混合计算: 向量1模长=0.6575344173501491, 向量2模长=0.6496337583592774
混合计算: 向量内积=0.31224146
混合计算: 余弦相似度=0.7309766325621769
混合计算: 余弦距离=0.2390648266351566
混合计算: 归一化欧氏距离=0.3847723194017181
混合计算: 最终相似度=0.6735106777049065
***** 混合同态加密比较结果摘要 *****
欧氏距离: 0.5771584791025771
余弦相似度: 0.7309766325621769
余弦距离: 0.2390648266351566
归一化欧氏距离: 0.3847723194017181
最终相似度: 0.6735106777049065
向量1范数: 0.6575344173501491
向量2范数: 0.6496337583592774
***********************
临时文件清理完成
比对完成，结果: 0.6735106777049065
为用户 20250324151804bdu6aefzbYqRzD5 生成密钥
开始生成加密密钥...
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
密钥生成完毕 - 已创建公钥、私钥、重线性化密钥和Galois密钥
临时目录已创建: /tmp/tmpwx3edzse
密钥已保存到临时文件
密钥已读取 - 公钥大小: 134111字节, 私钥大小: 70233字节
临时文件已清理
密钥生成过程完成
用户 20250324151804bdu6aefzbYqRzD5 密钥生成成功
加密用户 20250324151804bdu6aefzbYqRzD5 的 old 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134111字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpnbzuboh7
公钥已保存到临时文件: /tmp/tmpnbzuboh7/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88531字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88531字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
加密用户 20250324151804bdu6aefzbYqRzD5 的 new 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134111字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpqn1juwgd
公钥已保存到临时文件: /tmp/tmpqn1juwgd/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88473字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88473字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
成功读取私钥，大小: 70233字节
成功读取重线性化密钥，大小: 276887字节
成功读取Galois密钥，大小: 6070599字节
成功读取旧加密数据，大小: 88531字节
成功读取新加密数据，大小: 88473字节
调用SEAL比对函数
开始比较加密数据 - 使用混合同态加密实现
输入数据长度: data1=88531字节, data2=88473字节
私钥长度: 70233字节
重线性化密钥长度: 276887字节
Galois密钥长度: 6070599字节
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文创建成功
创建临时目录: /tmp/tmp2fngcok0
密钥保存到临时文件成功
私钥加载成功
重线性化密钥加载成功
Galois密钥加载成功
同态计算评估器创建成功
密文数据保存到临时文件成功
密文加载成功
开始执行同态计算
同态计算: 成功计算两个密文向量的差
同态计算: 成功计算差值向量的平方
部分解密: 获取差值平方向量，长度=4096
混合计算: 差值平方和=32966889.0
混合计算: 欧氏距离=0.5741679980632847
混合计算: 向量1模长=0.6000479397514835, 向量2模长=0.6496337583592774
混合计算: 向量内积=0.29845984
混合计算: 余弦相似度=0.7656519057787687
混合计算: 余弦距离=0.2224165369344514
混合计算: 归一化欧氏距离=0.38277866537552313
混合计算: 最终相似度=0.6813661860009055
***** 混合同态加密比较结果摘要 *****
欧氏距离: 0.5741679980632847
余弦相似度: 0.7656519057787687
余弦距离: 0.2224165369344514
归一化欧氏距离: 0.38277866537552313
最终相似度: 0.6813661860009055
向量1范数: 0.6000479397514835
向量2范数: 0.6496337583592774
***********************
临时文件清理完成
比对完成，结果: 0.6813661860009055
加密用户 20250324151804bdu6aefzbYqRzD5 的 old 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134111字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpoha676mp
公钥已保存到临时文件: /tmp/tmpoha676mp/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88500字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88500字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
加密用户 20250324151804bdu6aefzbYqRzD5 的 new 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134111字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpng86dxzm
公钥已保存到临时文件: /tmp/tmpng86dxzm/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88564字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88564字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
成功读取私钥，大小: 70233字节
成功读取重线性化密钥，大小: 276887字节
成功读取Galois密钥，大小: 6070599字节
成功读取旧加密数据，大小: 88500字节
成功读取新加密数据，大小: 88564字节
调用SEAL比对函数
开始比较加密数据 - 使用混合同态加密实现
输入数据长度: data1=88500字节, data2=88564字节
私钥长度: 70233字节
重线性化密钥长度: 276887字节
Galois密钥长度: 6070599字节
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文创建成功
创建临时目录: /tmp/tmp4xe5egvs
密钥保存到临时文件成功
私钥加载成功
重线性化密钥加载成功
Galois密钥加载成功
同态计算评估器创建成功
密文数据保存到临时文件成功
密文加载成功
开始执行同态计算
同态计算: 成功计算两个密文向量的差
同态计算: 成功计算差值向量的平方
部分解密: 获取差值平方向量，长度=4096
混合计算: 差值平方和=35811795.0
混合计算: 欧氏距离=0.5984295697907983
混合计算: 向量1模长=0.6000479397514835, 向量2模长=0.6335891334295436
混合计算: 向量内积=0.14491677
混合计算: 余弦相似度=0.38117549815186086
混合计算: 余弦距离=0.3755193625574148
混合计算: 归一化欧氏距离=0.3989530465271989
混合计算: 最终相似度=0.6104204270607148
***** 混合同态加密比较结果摘要 *****
欧氏距离: 0.5984295697907983
余弦相似度: 0.38117549815186086
余弦距离: 0.3755193625574148
归一化欧氏距离: 0.3989530465271989
最终相似度: 0.6104204270607148
向量1范数: 0.6000479397514835
向量2范数: 0.6335891334295436
***********************
临时文件清理完成
比对完成，结果: 0.6104204270607148
为用户 20250324151804bdu6aefzbYqRzD5 生成密钥
开始生成加密密钥...
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
密钥生成完毕 - 已创建公钥、私钥、重线性化密钥和Galois密钥
临时目录已创建: /tmp/tmp5zii9fhg
密钥已保存到临时文件
密钥已读取 - 公钥大小: 134059字节, 私钥大小: 70165字节
临时文件已清理
密钥生成过程完成
用户 20250324151804bdu6aefzbYqRzD5 密钥生成成功
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134059字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpbvzu9cfe
公钥已保存到临时文件: /tmp/tmpbvzu9cfe/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88567字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88567字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134059字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmput5h43ht
公钥已保存到临时文件: /tmp/tmput5h43ht/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88557字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88557字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
成功读取私钥，大小: 70165字节
成功读取重线性化密钥，大小: 276904字节
成功读取Galois密钥，大小: 6070367字节
成功读取旧加密数据，大小: 88567字节
成功读取新加密数据，大小: 88557字节
调用SEAL比对函数
开始比较加密数据 - 使用混合同态加密实现
输入数据长度: data1=88567字节, data2=88557字节
私钥长度: 70165字节
重线性化密钥长度: 276904字节
Galois密钥长度: 6070367字节
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文创建成功
创建临时目录: /tmp/tmpgfgtgqqa
密钥保存到临时文件成功
私钥加载成功
重线性化密钥加载成功
Galois密钥加载成功
同态计算评估器创建成功
密文数据保存到临时文件成功
密文加载成功
开始执行同态计算
同态计算: 成功计算两个密文向量的差
同态计算: 成功计算差值向量的平方
部分解密: 获取差值平方向量，长度=4096
混合计算: 差值平方和=36153701.0
混合计算: 欧氏距离=6.0127947744788365e-05
混合计算: 向量1模长=0.6729654820271245, 向量2模长=0.6496337583592774
混合计算: 向量内积=0.30313346
混合计算: 余弦相似度=0.6933819033677081
混合计算: 最终相似度=0.9999545380445499
***** 混合同态加密比较结果摘要 *****
欧氏距离: 6.0127947744788365e-05
余弦相似度: 0.6933819033677081
欧氏距离部分用于最终相似度: 4.5461955450104285e-05
最终相似度: 0.9999545380445499
向量1范数: 0.6729654820271245
向量2范数: 0.6496337583592774
***********************
临时文件清理完成
比对完成，结果: 0.9999545380445499
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134059字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpjmvbdqyq
公钥已保存到临时文件: /tmp/tmpjmvbdqyq/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88534字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88534字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134059字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpacojfytb
公钥已保存到临时文件: /tmp/tmpacojfytb/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88523字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88523字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
成功读取私钥，大小: 70165字节
成功读取重线性化密钥，大小: 276904字节
成功读取Galois密钥，大小: 6070367字节
成功读取旧加密数据，大小: 88534字节
成功读取新加密数据，大小: 88523字节
调用SEAL比对函数
开始比较加密数据 - 使用混合同态加密实现
输入数据长度: data1=88534字节, data2=88523字节
私钥长度: 70165字节
重线性化密钥长度: 276904字节
Galois密钥长度: 6070367字节
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文创建成功
创建临时目录: /tmp/tmpsstpf6bn
密钥保存到临时文件成功
私钥加载成功
重线性化密钥加载成功
Galois密钥加载成功
同态计算评估器创建成功
密文数据保存到临时文件成功
密文加载成功
开始执行同态计算
同态计算: 成功计算两个密文向量的差
同态计算: 成功计算差值向量的平方
部分解密: 获取差值平方向量，长度=4096
混合计算: 差值平方和=36729547.0
混合计算: 欧氏距离=6.0604906567042896e-05
混合计算: 向量1模长=0.6729654820271245, 向量2模长=0.6252841194209237
混合计算: 向量内积=0.00087926
混合计算: 余弦相似度=0.0020895228687797776
混合计算: 最终相似度=0.9999533179856174
***** 混合同态加密比较结果摘要 *****
欧氏距离: 6.0604906567042896e-05
余弦相似度: 0.0020895228687797776
欧氏距离部分用于最终相似度: 4.668201438263112e-05
最终相似度: 0.9999533179856174
向量1范数: 0.6729654820271245
向量2范数: 0.6252841194209237
***********************
临时文件清理完成
比对完成，结果: 0.9999533179856174
为用户 20250324151804bdu6aefzbYqRzD5 生成密钥
开始生成加密密钥...
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
密钥生成完毕 - 已创建公钥、私钥、重线性化密钥和Galois密钥
临时目录已创建: /tmp/tmpdl0kijml
密钥已保存到临时文件
密钥已读取 - 公钥大小: 134054字节, 私钥大小: 70235字节
临时文件已清理
密钥生成过程完成
用户 20250324151804bdu6aefzbYqRzD5 密钥生成成功
加密用户 20250324151804bdu6aefzbYqRzD5 的 old 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134054字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpet4op_go
公钥已保存到临时文件: /tmp/tmpet4op_go/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88549字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88549字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
加密用户 20250324151804bdu6aefzbYqRzD5 的 new 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134054字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmp56phclog
公钥已保存到临时文件: /tmp/tmp56phclog/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88479字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88479字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
成功读取私钥，大小: 70235字节
成功读取重线性化密钥，大小: 276821字节
成功读取Galois密钥，大小: 6071089字节
成功读取旧加密数据，大小: 88549字节
成功读取新加密数据，大小: 88479字节
调用SEAL比对函数
开始比较加密数据 - 使用混合同态加密实现
输入数据长度: data1=88549字节, data2=88479字节
私钥长度: 70235字节
重线性化密钥长度: 276821字节
Galois密钥长度: 6071089字节
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文创建成功
创建临时目录: /tmp/tmp_4y9v0fd
密钥保存到临时文件成功
私钥加载成功
重线性化密钥加载成功
Galois密钥加载成功
同态计算评估器创建成功
密文数据保存到临时文件成功
密文加载成功
开始执行同态计算
同态计算: 成功计算两个密文向量的差
同态计算: 成功计算差值向量的平方
部分解密: 获取差值平方向量，长度=4096
混合计算: 差值平方和=37348521.0
混合计算: 欧氏距离=0.6111343632950123
混合计算: 向量1模长=0.6956860570688478, 向量2模长=0.6496337583592774
混合计算: 归一化距离=0.45426697524746495
混合计算: 最终相似度=0.8864332561881337
***** 混合同态加密比较结果摘要 *****
欧氏距离: 0.6111343632950123
归一化距离: 0.45426697524746495
最终相似度: 0.8864332561881337
向量1范数: 0.6956860570688478
向量2范数: 0.6496337583592774
***********************
临时文件清理完成
比对完成，结果: 0.8864332561881337
加密用户 20250324151804bdu6aefzbYqRzD5 的 old 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134054字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpqnrnmzta
公钥已保存到临时文件: /tmp/tmpqnrnmzta/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88524字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88524字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
加密用户 20250324151804bdu6aefzbYqRzD5 的 new 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134054字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmp3iba04_i
公钥已保存到临时文件: /tmp/tmp3iba04_i/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88512字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88512字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
成功读取私钥，大小: 70235字节
成功读取重线性化密钥，大小: 276821字节
成功读取Galois密钥，大小: 6071089字节
成功读取旧加密数据，大小: 88524字节
成功读取新加密数据，大小: 88512字节
调用SEAL比对函数
开始比较加密数据 - 使用混合同态加密实现
输入数据长度: data1=88524字节, data2=88512字节
私钥长度: 70235字节
重线性化密钥长度: 276821字节
Galois密钥长度: 6071089字节
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文创建成功
创建临时目录: /tmp/tmpwmn6a1ri
密钥保存到临时文件成功
私钥加载成功
重线性化密钥加载成功
Galois密钥加载成功
同态计算评估器创建成功
密文数据保存到临时文件成功
密文加载成功
开始执行同态计算
同态计算: 成功计算两个密文向量的差
同态计算: 成功计算差值向量的平方
部分解密: 获取差值平方向量，长度=4096
混合计算: 差值平方和=38774565.0
混合计算: 欧氏距离=0.6226922594669055
混合计算: 向量1模长=0.6956860570688478, 向量2模长=0.6252841194209237
混合计算: 归一化距离=0.47139009687682165
混合计算: 最终相似度=0.8821524757807946
***** 混合同态加密比较结果摘要 *****
欧氏距离: 0.6226922594669055
归一化距离: 0.47139009687682165
最终相似度: 0.8821524757807946
向量1范数: 0.6956860570688478
向量2范数: 0.6252841194209237
***********************
临时文件清理完成
比对完成，结果: 0.8821524757807946
加密用户 20250324151804bdu6aefzbYqRzD5 的 old 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134054字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmpoxgfkcpp
公钥已保存到临时文件: /tmp/tmpoxgfkcpp/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88538字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88538字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
加密用户 20250324151804bdu6aefzbYqRzD5 的 new 类型数据
已加载原始人脸数据，向量长度: 512
已加载公钥，大小: 134054字节
开始加密数据 - 数据长度: 512
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文已创建
临时目录已创建: /tmp/tmp4d5hhytc
公钥已保存到临时文件: /tmp/tmp4d5hhytc/public_key.key
公钥加载成功
加密器已创建
批处理编码器已创建
浮点数据已转换为整数: scale_factor=10000
数据长度 512 小于多项式模数4096，将填充
数据长度调整后: 4096
数据已编码为明文对象
明文已加密为密文对象
密文已保存并读取: 大小=88555字节
临时文件已清理
数据加密成功
数据加密完成，密文大小: 88555字节
加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
成功读取私钥，大小: 70235字节
成功读取重线性化密钥，大小: 276821字节
成功读取Galois密钥，大小: 6071089字节
成功读取旧加密数据，大小: 88538字节
成功读取新加密数据，大小: 88555字节
调用SEAL比对函数
开始比较加密数据 - 使用混合同态加密实现
输入数据长度: data1=88538字节, data2=88555字节
私钥长度: 70235字节
重线性化密钥长度: 276821字节
Galois密钥长度: 6071089字节
加密参数已设置: scheme=BFV, poly_modulus_degree=4096
SEAL上下文创建成功
创建临时目录: /tmp/tmpgx61002x
密钥保存到临时文件成功
私钥加载成功
重线性化密钥加载成功
Galois密钥加载成功
同态计算评估器创建成功
密文数据保存到临时文件成功
密文加载成功
开始执行同态计算
同态计算: 成功计算两个密文向量的差
同态计算: 成功计算差值向量的平方
部分解密: 获取差值平方向量，长度=4096
混合计算: 差值平方和=34794161.0
混合计算: 欧氏距离=0.5898657559140045
混合计算: 向量1模长=0.6956860570688478, 向量2模长=0.6335891334295436
混合计算: 归一化距离=0.4437499173461918
混合计算: 最终相似度=0.889062520663452
***** 混合同态加密比较结果摘要 *****
欧氏距离: 0.5898657559140045
归一化距离: 0.4437499173461918
最终相似度: 0.889062520663452
向量1范数: 0.6956860570688478
向量2范数: 0.6335891334295436
***********************
临时文件清理完成
比对完成，结果: 0.889062520663452
[DEBUG] 为用户 20250324151804bdu6aefzbYqRzD5 生成密钥
[DEBUG] 开始生成加密密钥...
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文已创建
[DEBUG] 密钥生成完毕 - 已创建公钥、私钥、重线性化密钥和Galois密钥
[DEBUG] 临时目录已创建: /tmp/tmp23psypyr
[DEBUG] 密钥已保存到临时文件
[DEBUG] 密钥已读取 - 公钥大小: 134126字节, 私钥大小: 70291字节
[DEBUG] 临时文件已清理
[DEBUG] 密钥生成过程完成
[DEBUG] 用户 20250324151804bdu6aefzbYqRzD5 密钥生成成功
[DEBUG] 加密用户 20250324151804bdu6aefzbYqRzD5 的 old 类型数据
[DEBUG] 已加载原始人脸数据，向量长度: 512
[DEBUG] 已加载公钥，大小: 134126字节
[DEBUG] 开始加密数据 - 数据长度: 512
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文已创建
[DEBUG] 临时目录已创建: /tmp/tmpisrpdzre
[DEBUG] 公钥已保存到临时文件: /tmp/tmpisrpdzre/public_key.key
[DEBUG] 公钥加载成功
[DEBUG] 加密器已创建
[DEBUG] 批处理编码器已创建
[DEBUG] 浮点数据已转换为整数: scale_factor=10000
[DEBUG] 数据长度 512 小于多项式模数4096，将填充
[DEBUG] 数据长度调整后: 4096
[DEBUG] 数据已编码为明文对象
[DEBUG] 明文已加密为密文对象
[DEBUG] 密文已保存并读取: 大小=88528字节
[DEBUG] 临时文件已清理
[DEBUG] 数据加密成功
[DEBUG] 数据加密完成，密文大小: 88528字节
[DEBUG] 加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
[DEBUG] 加密用户 20250324151804bdu6aefzbYqRzD5 的 new 类型数据
[DEBUG] 已加载原始人脸数据，向量长度: 512
[DEBUG] 已加载公钥，大小: 134126字节
[DEBUG] 开始加密数据 - 数据长度: 512
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文已创建
[DEBUG] 临时目录已创建: /tmp/tmp_hwrgld_
[DEBUG] 公钥已保存到临时文件: /tmp/tmp_hwrgld_/public_key.key
[DEBUG] 公钥加载成功
[DEBUG] 加密器已创建
[DEBUG] 批处理编码器已创建
[DEBUG] 浮点数据已转换为整数: scale_factor=10000
[DEBUG] 数据长度 512 小于多项式模数4096，将填充
[DEBUG] 数据长度调整后: 4096
[DEBUG] 数据已编码为明文对象
[DEBUG] 明文已加密为密文对象
[DEBUG] 密文已保存并读取: 大小=88532字节
[DEBUG] 临时文件已清理
[DEBUG] 数据加密成功
[DEBUG] 数据加密完成，密文大小: 88532字节
[DEBUG] 加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
[DEBUG] 开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
[DEBUG] 成功读取私钥，大小: 70291字节
[DEBUG] 成功读取重线性化密钥，大小: 277043字节
[DEBUG] 成功读取Galois密钥，大小: 6070567字节
[DEBUG] 成功读取旧加密数据，大小: 88528字节
[DEBUG] 成功读取新加密数据，大小: 88532字节
[DEBUG] 调用混合同态加密比对函数
[DEBUG] 开始比较加密数据 - 使用混合同态加密实现
[DEBUG] 输入数据长度: data1=88528字节, data2=88532字节
[DEBUG] 私钥长度: 70291字节
[DEBUG] 重线性化密钥长度: 277043字节
[DEBUG] Galois密钥长度: 6070567字节
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文创建成功
[DEBUG] 创建临时目录: /tmp/tmpv3gi4gu7
[DEBUG] 密钥保存到临时文件成功
[DEBUG] 私钥加载成功
[DEBUG] 重线性化密钥加载成功
[DEBUG] Galois密钥加载成功
[DEBUG] 密文数据保存到临时文件成功
[DEBUG] 密文加载成功
[DEBUG] 创建评估器成功
[DEBUG] 开始同态计算：计算密文向量的平方差
[DEBUG] 临时文件清理完成
[DEBUG] 混合同态加密比较出错: sub(): incompatible function arguments. The following argument types are supported:
    1. (self: seal.Evaluator, arg0: seal.Ciphertext, arg1: seal.Ciphertext) -> seal.Ciphertext

Invoked with: <seal.Evaluator object at 0x7feae468d6c0>, <seal.Ciphertext object at 0x7feae468da08>, <seal.Ciphertext object at 0x7feae468da78>, <seal.Ciphertext object at 0x7feae468d688>
[DEBUG] 由于错误，返回随机相似度: 0.8066055672154915
[DEBUG] 比对完成，结果: 0.8066055672154915
[DEBUG] 加密用户 20250324151804bdu6aefzbYqRzD5 的 old 类型数据
[DEBUG] 已加载原始人脸数据，向量长度: 512
[DEBUG] 已加载公钥，大小: 134126字节
[DEBUG] 开始加密数据 - 数据长度: 512
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文已创建
[DEBUG] 临时目录已创建: /tmp/tmpis01zdln
[DEBUG] 公钥已保存到临时文件: /tmp/tmpis01zdln/public_key.key
[DEBUG] 公钥加载成功
[DEBUG] 加密器已创建
[DEBUG] 批处理编码器已创建
[DEBUG] 浮点数据已转换为整数: scale_factor=10000
[DEBUG] 数据长度 512 小于多项式模数4096，将填充
[DEBUG] 数据长度调整后: 4096
[DEBUG] 数据已编码为明文对象
[DEBUG] 明文已加密为密文对象
[DEBUG] 密文已保存并读取: 大小=88504字节
[DEBUG] 临时文件已清理
[DEBUG] 数据加密成功
[DEBUG] 数据加密完成，密文大小: 88504字节
[DEBUG] 加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
[DEBUG] 加密用户 20250324151804bdu6aefzbYqRzD5 的 new 类型数据
[DEBUG] 已加载原始人脸数据，向量长度: 512
[DEBUG] 已加载公钥，大小: 134126字节
[DEBUG] 开始加密数据 - 数据长度: 512
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文已创建
[DEBUG] 临时目录已创建: /tmp/tmp19stl45o
[DEBUG] 公钥已保存到临时文件: /tmp/tmp19stl45o/public_key.key
[DEBUG] 公钥加载成功
[DEBUG] 加密器已创建
[DEBUG] 批处理编码器已创建
[DEBUG] 浮点数据已转换为整数: scale_factor=10000
[DEBUG] 数据长度 512 小于多项式模数4096，将填充
[DEBUG] 数据长度调整后: 4096
[DEBUG] 数据已编码为明文对象
[DEBUG] 明文已加密为密文对象
[DEBUG] 密文已保存并读取: 大小=88513字节
[DEBUG] 临时文件已清理
[DEBUG] 数据加密成功
[DEBUG] 数据加密完成，密文大小: 88513字节
[DEBUG] 加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
[DEBUG] 开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
[DEBUG] 成功读取私钥，大小: 70291字节
[DEBUG] 成功读取重线性化密钥，大小: 277043字节
[DEBUG] 成功读取Galois密钥，大小: 6070567字节
[DEBUG] 成功读取旧加密数据，大小: 88504字节
[DEBUG] 成功读取新加密数据，大小: 88513字节
[DEBUG] 调用混合同态加密比对函数
[DEBUG] 开始比较加密数据 - 使用混合同态加密实现
[DEBUG] 输入数据长度: data1=88504字节, data2=88513字节
[DEBUG] 私钥长度: 70291字节
[DEBUG] 重线性化密钥长度: 277043字节
[DEBUG] Galois密钥长度: 6070567字节
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文创建成功
[DEBUG] 创建临时目录: /tmp/tmp_u1w9ggw
[DEBUG] 密钥保存到临时文件成功
[DEBUG] 私钥加载成功
[DEBUG] 重线性化密钥加载成功
[DEBUG] Galois密钥加载成功
[DEBUG] 密文数据保存到临时文件成功
[DEBUG] 密文加载成功
[DEBUG] 创建评估器成功
[DEBUG] 开始同态计算：计算密文向量的平方差
[DEBUG] 临时文件清理完成
[DEBUG] 混合同态加密比较出错: sub(): incompatible function arguments. The following argument types are supported:
    1. (self: seal.Evaluator, arg0: seal.Ciphertext, arg1: seal.Ciphertext) -> seal.Ciphertext

Invoked with: <seal.Evaluator object at 0x7fead6e69340>, <seal.Ciphertext object at 0x7fead400bd50>, <seal.Ciphertext object at 0x7fead6e69378>, <seal.Ciphertext object at 0x7fead41dcf10>
[DEBUG] 由于错误，返回随机相似度: 0.7956263264837025
[DEBUG] 比对完成，结果: 0.7956263264837025
[DEBUG] 为用户 20250324151804bdu6aefzbYqRzD5 生成密钥
[DEBUG] 开始生成加密密钥...
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文已创建
[DEBUG] 密钥生成完毕 - 已创建公钥、私钥、重线性化密钥和Galois密钥
[DEBUG] 临时目录已创建: /tmp/tmp0yw1kr12
[DEBUG] 密钥已保存到临时文件
[DEBUG] 密钥已读取 - 公钥大小: 134115字节, 私钥大小: 70250字节
[DEBUG] 临时文件已清理
[DEBUG] 密钥生成过程完成
[DEBUG] 用户 20250324151804bdu6aefzbYqRzD5 密钥生成成功
[DEBUG] 加密用户 20250324151804bdu6aefzbYqRzD5 的 old 类型数据
[DEBUG] 已加载原始人脸数据，向量长度: 512
[DEBUG] 已加载公钥，大小: 134115字节
[DEBUG] 开始加密数据 - 数据长度: 512
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文已创建
[DEBUG] 临时目录已创建: /tmp/tmp74tqiapn
[DEBUG] 公钥已保存到临时文件: /tmp/tmp74tqiapn/public_key.key
[DEBUG] 公钥加载成功
[DEBUG] 加密器已创建
[DEBUG] 批处理编码器已创建
[DEBUG] 浮点数据已转换为整数: scale_factor=10000
[DEBUG] 数据长度 512 小于多项式模数4096，将填充
[DEBUG] 数据长度调整后: 4096
[DEBUG] 数据已编码为明文对象
[DEBUG] 明文已加密为密文对象
[DEBUG] 密文已保存并读取: 大小=88549字节
[DEBUG] 临时文件已清理
[DEBUG] 数据加密成功
[DEBUG] 数据加密完成，密文大小: 88549字节
[DEBUG] 加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
[DEBUG] 加密用户 20250324151804bdu6aefzbYqRzD5 的 new 类型数据
[DEBUG] 已加载原始人脸数据，向量长度: 512
[DEBUG] 已加载公钥，大小: 134115字节
[DEBUG] 开始加密数据 - 数据长度: 512
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文已创建
[DEBUG] 临时目录已创建: /tmp/tmpe18i5jhr
[DEBUG] 公钥已保存到临时文件: /tmp/tmpe18i5jhr/public_key.key
[DEBUG] 公钥加载成功
[DEBUG] 加密器已创建
[DEBUG] 批处理编码器已创建
[DEBUG] 浮点数据已转换为整数: scale_factor=10000
[DEBUG] 数据长度 512 小于多项式模数4096，将填充
[DEBUG] 数据长度调整后: 4096
[DEBUG] 数据已编码为明文对象
[DEBUG] 明文已加密为密文对象
[DEBUG] 密文已保存并读取: 大小=88533字节
[DEBUG] 临时文件已清理
[DEBUG] 数据加密成功
[DEBUG] 数据加密完成，密文大小: 88533字节
[DEBUG] 加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
[DEBUG] 开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
[DEBUG] 成功读取私钥，大小: 70250字节
[DEBUG] 成功读取重线性化密钥，大小: 276823字节
[DEBUG] 成功读取Galois密钥，大小: 6070494字节
[DEBUG] 成功读取旧加密数据，大小: 88549字节
[DEBUG] 成功读取新加密数据，大小: 88533字节
[DEBUG] 调用混合同态加密比对函数
[DEBUG] 开始比较加密数据 - 使用混合同态加密实现
[DEBUG] 输入数据长度: data1=88549字节, data2=88533字节
[DEBUG] 私钥长度: 70250字节
[DEBUG] 重线性化密钥长度: 276823字节
[DEBUG] Galois密钥长度: 6070494字节
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文创建成功
[DEBUG] 创建临时目录: /tmp/tmpvztw427_
[DEBUG] 密钥保存到临时文件成功
[DEBUG] 私钥加载成功
[DEBUG] 重线性化密钥加载成功
[DEBUG] Galois密钥加载成功
[DEBUG] 密文数据保存到临时文件成功
[DEBUG] 密文加载成功
[DEBUG] 创建评估器成功
[DEBUG] 开始同态计算：计算密文向量的平方差
[DEBUG] 执行密文同态减法运算: diff = cipher1 - cipher2
[DEBUG] 执行密文同态平方运算和重线性化: squared_diff = diff²
[DEBUG] 解密器创建成功
[DEBUG] 解密平方差密文成功
[DEBUG] 解码平方差向量长度: 4096
[DEBUG] 同态计算的欧氏距离: 0.576766209135036
[DEBUG] 解码原始向量长度: vec1=4096, vec2=4096
[DEBUG] 范数计算: norm1=1.0000003399999422, norm2=1.0000260496607076
[DEBUG] 最终相似度: 0.7116207005484074
[DEBUG] ***** 混合同态加密比较结果摘要 *****
[DEBUG] 同态计算的欧氏距离: 0.576766209135036
[DEBUG] 归一化距离: 0.2883792994515925
[DEBUG] 最终相似度: 0.7116207005484074
[DEBUG] 向量1范数: 1.0000003399999422
[DEBUG] 向量2范数: 1.0000260496607076
[DEBUG] *********************************
[DEBUG] 临时文件清理完成
[DEBUG] 比对完成，结果: 0.7116207005484074
[DEBUG] 加密用户 20250324151804bdu6aefzbYqRzD5 的 old 类型数据
[DEBUG] 已加载原始人脸数据，向量长度: 512
[DEBUG] 已加载公钥，大小: 134115字节
[DEBUG] 开始加密数据 - 数据长度: 512
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文已创建
[DEBUG] 临时目录已创建: /tmp/tmpjxpvvjpe
[DEBUG] 公钥已保存到临时文件: /tmp/tmpjxpvvjpe/public_key.key
[DEBUG] 公钥加载成功
[DEBUG] 加密器已创建
[DEBUG] 批处理编码器已创建
[DEBUG] 浮点数据已转换为整数: scale_factor=10000
[DEBUG] 数据长度 512 小于多项式模数4096，将填充
[DEBUG] 数据长度调整后: 4096
[DEBUG] 数据已编码为明文对象
[DEBUG] 明文已加密为密文对象
[DEBUG] 密文已保存并读取: 大小=88587字节
[DEBUG] 临时文件已清理
[DEBUG] 数据加密成功
[DEBUG] 数据加密完成，密文大小: 88587字节
[DEBUG] 加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
[DEBUG] 加密用户 20250324151804bdu6aefzbYqRzD5 的 new 类型数据
[DEBUG] 已加载原始人脸数据，向量长度: 512
[DEBUG] 已加载公钥，大小: 134115字节
[DEBUG] 开始加密数据 - 数据长度: 512
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文已创建
[DEBUG] 临时目录已创建: /tmp/tmpn3z8tr2b
[DEBUG] 公钥已保存到临时文件: /tmp/tmpn3z8tr2b/public_key.key
[DEBUG] 公钥加载成功
[DEBUG] 加密器已创建
[DEBUG] 批处理编码器已创建
[DEBUG] 浮点数据已转换为整数: scale_factor=10000
[DEBUG] 数据长度 512 小于多项式模数4096，将填充
[DEBUG] 数据长度调整后: 4096
[DEBUG] 数据已编码为明文对象
[DEBUG] 明文已加密为密文对象
[DEBUG] 密文已保存并读取: 大小=88557字节
[DEBUG] 临时文件已清理
[DEBUG] 数据加密成功
[DEBUG] 数据加密完成，密文大小: 88557字节
[DEBUG] 加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
[DEBUG] 开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
[DEBUG] 成功读取私钥，大小: 70250字节
[DEBUG] 成功读取重线性化密钥，大小: 276823字节
[DEBUG] 成功读取Galois密钥，大小: 6070494字节
[DEBUG] 成功读取旧加密数据，大小: 88587字节
[DEBUG] 成功读取新加密数据，大小: 88557字节
[DEBUG] 调用混合同态加密比对函数
[DEBUG] 开始比较加密数据 - 使用混合同态加密实现
[DEBUG] 输入数据长度: data1=88587字节, data2=88557字节
[DEBUG] 私钥长度: 70250字节
[DEBUG] 重线性化密钥长度: 276823字节
[DEBUG] Galois密钥长度: 6070494字节
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文创建成功
[DEBUG] 创建临时目录: /tmp/tmpa5lh7q8c
[DEBUG] 密钥保存到临时文件成功
[DEBUG] 私钥加载成功
[DEBUG] 重线性化密钥加载成功
[DEBUG] Galois密钥加载成功
[DEBUG] 密文数据保存到临时文件成功
[DEBUG] 密文加载成功
[DEBUG] 创建评估器成功
[DEBUG] 开始同态计算：计算密文向量的平方差
[DEBUG] 执行密文同态减法运算: diff = cipher1 - cipher2
[DEBUG] 执行密文同态平方运算和重线性化: squared_diff = diff²
[DEBUG] 解密器创建成功
[DEBUG] 解密平方差密文成功
[DEBUG] 解码平方差向量长度: 4096
[DEBUG] 同态计算的欧氏距离: 0.5991071189695546
[DEBUG] 解码原始向量长度: vec1=4096, vec2=4096
[DEBUG] 范数计算: norm1=1.0000003399999422, norm2=0.9999870499161476
[DEBUG] 最终相似度: 0.700444551805554
[DEBUG] ***** 混合同态加密比较结果摘要 *****
[DEBUG] 同态计算的欧氏距离: 0.5991071189695546
[DEBUG] 归一化距离: 0.299555448194446
[DEBUG] 最终相似度: 0.700444551805554
[DEBUG] 向量1范数: 1.0000003399999422
[DEBUG] 向量2范数: 0.9999870499161476
[DEBUG] *********************************
[DEBUG] 临时文件清理完成
[DEBUG] 比对完成，结果: 0.700444551805554
[DEBUG] 为用户 20250324151804bdu6aefzbYqRzD5 生成密钥
[DEBUG] 开始生成加密密钥...
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文已创建
[DEBUG] 密钥生成完毕 - 已创建公钥、私钥、重线性化密钥和Galois密钥
[DEBUG] 临时目录已创建: /tmp/tmpil7rs9fy
[DEBUG] 密钥已保存到临时文件
[DEBUG] 密钥已读取 - 公钥大小: 134033字节, 私钥大小: 70268字节
[DEBUG] 临时文件已清理
[DEBUG] 密钥生成过程完成
[DEBUG] 用户 20250324151804bdu6aefzbYqRzD5 密钥生成成功
[DEBUG] 加密用户 20250324151804bdu6aefzbYqRzD5 的 old 类型数据
[DEBUG] 已加载原始人脸数据，向量长度: 512
[DEBUG] 已加载公钥，大小: 134033字节
[DEBUG] 开始加密数据 - 数据长度: 512
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文已创建
[DEBUG] 临时目录已创建: /tmp/tmpk99cszfb
[DEBUG] 公钥已保存到临时文件: /tmp/tmpk99cszfb/public_key.key
[DEBUG] 公钥加载成功
[DEBUG] 加密器已创建
[DEBUG] 批处理编码器已创建
[DEBUG] 浮点数据已转换为整数: scale_factor=10000
[DEBUG] 数据长度 512 小于多项式模数4096，将填充
[DEBUG] 数据长度调整后: 4096
[DEBUG] 数据已编码为明文对象
[DEBUG] 明文已加密为密文对象
[DEBUG] 密文已保存并读取: 大小=88542字节
[DEBUG] 临时文件已清理
[DEBUG] 数据加密成功
[DEBUG] 数据加密完成，密文大小: 88542字节
[DEBUG] 加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
[DEBUG] 加密用户 20250324151804bdu6aefzbYqRzD5 的 new 类型数据
[DEBUG] 已加载原始人脸数据，向量长度: 512
[DEBUG] 已加载公钥，大小: 134033字节
[DEBUG] 开始加密数据 - 数据长度: 512
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文已创建
[DEBUG] 临时目录已创建: /tmp/tmpe8qeelsz
[DEBUG] 公钥已保存到临时文件: /tmp/tmpe8qeelsz/public_key.key
[DEBUG] 公钥加载成功
[DEBUG] 加密器已创建
[DEBUG] 批处理编码器已创建
[DEBUG] 浮点数据已转换为整数: scale_factor=10000
[DEBUG] 数据长度 512 小于多项式模数4096，将填充
[DEBUG] 数据长度调整后: 4096
[DEBUG] 数据已编码为明文对象
[DEBUG] 明文已加密为密文对象
[DEBUG] 密文已保存并读取: 大小=88540字节
[DEBUG] 临时文件已清理
[DEBUG] 数据加密成功
[DEBUG] 数据加密完成，密文大小: 88540字节
[DEBUG] 加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
[DEBUG] 开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
[DEBUG] 成功读取私钥，大小: 70268字节
[DEBUG] 成功读取重线性化密钥，大小: 276928字节
[DEBUG] 成功读取Galois密钥，大小: 6070408字节
[DEBUG] 成功读取旧加密数据，大小: 88542字节
[DEBUG] 成功读取新加密数据，大小: 88540字节
[DEBUG] 调用混合同态加密比对函数
[DEBUG] 开始比较加密数据 - 使用混合同态加密实现
[DEBUG] 输入数据长度: data1=88542字节, data2=88540字节
[DEBUG] 私钥长度: 70268字节
[DEBUG] 重线性化密钥长度: 276928字节
[DEBUG] Galois密钥长度: 6070408字节
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文创建成功
[DEBUG] 创建临时目录: /tmp/tmpf96vxnst
[DEBUG] 密钥保存到临时文件成功
[DEBUG] 私钥加载成功
[DEBUG] 重线性化密钥加载成功
[DEBUG] Galois密钥加载成功
[DEBUG] 密文数据保存到临时文件成功
[DEBUG] 密文加载成功
[DEBUG] 创建评估器成功
[DEBUG] 开始同态计算：计算密文向量的平方差
[DEBUG] 执行密文同态减法运算: diff = cipher1 - cipher2
[DEBUG] 执行密文同态平方运算和重线性化: squared_diff = diff²
[DEBUG] 解密器创建成功
[DEBUG] 解密平方差密文成功
[DEBUG] 解码平方差向量长度: 4096
[DEBUG] 同态计算的欧氏距离: 0.574665972544051
[DEBUG] 解码原始向量长度: vec1=4096, vec2=4096
[DEBUG] 范数计算: norm1=0.9999848698855398, norm2=0.9999870499161476
[DEBUG] 最终相似度: 0.7126629794877153
[DEBUG] ***** 混合同态加密比较结果摘要 *****
[DEBUG] 同态计算的欧氏距离: 0.574665972544051
[DEBUG] 归一化距离: 0.28733702051228477
[DEBUG] 最终相似度: 0.7126629794877153
[DEBUG] 向量1范数: 0.9999848698855398
[DEBUG] 向量2范数: 0.9999870499161476
[DEBUG] *********************************
[DEBUG] 临时文件清理完成
[DEBUG] 比对完成，结果: 0.7126629794877153
[DEBUG] 为用户 20250324151804bdu6aefzbYqRzD5 生成密钥
[DEBUG] 开始生成加密密钥...
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文已创建
[DEBUG] 密钥生成完毕 - 已创建公钥、私钥、重线性化密钥和Galois密钥
[DEBUG] 临时目录已创建: /tmp/tmpwde8ohzx
[DEBUG] 密钥已保存到临时文件
[DEBUG] 密钥已读取 - 公钥大小: 134106字节, 私钥大小: 70218字节
[DEBUG] 临时文件已清理
[DEBUG] 密钥生成过程完成
[DEBUG] 用户 20250324151804bdu6aefzbYqRzD5 密钥生成成功
[DEBUG] 加密用户 20250324151804bdu6aefzbYqRzD5 的 old 类型数据
[DEBUG] 已加载原始人脸数据，向量长度: 512
[DEBUG] 已加载公钥，大小: 134106字节
[DEBUG] 开始加密数据 - 数据长度: 512
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文已创建
[DEBUG] 临时目录已创建: /tmp/tmpnl3xstaz
[DEBUG] 公钥已保存到临时文件: /tmp/tmpnl3xstaz/public_key.key
[DEBUG] 公钥加载成功
[DEBUG] 加密器已创建
[DEBUG] 批处理编码器已创建
[DEBUG] 浮点数据已转换为整数: scale_factor=10000
[DEBUG] 数据长度 512 小于多项式模数4096，将填充
[DEBUG] 数据长度调整后: 4096
[DEBUG] 数据已编码为明文对象
[DEBUG] 明文已加密为密文对象
[DEBUG] 密文已保存并读取: 大小=88491字节
[DEBUG] 临时文件已清理
[DEBUG] 数据加密成功
[DEBUG] 数据加密完成，密文大小: 88491字节
[DEBUG] 加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
[DEBUG] 加密用户 20250324151804bdu6aefzbYqRzD5 的 new 类型数据
[DEBUG] 已加载原始人脸数据，向量长度: 512
[DEBUG] 已加载公钥，大小: 134106字节
[DEBUG] 开始加密数据 - 数据长度: 512
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文已创建
[DEBUG] 临时目录已创建: /tmp/tmpst2h41v0
[DEBUG] 公钥已保存到临时文件: /tmp/tmpst2h41v0/public_key.key
[DEBUG] 公钥加载成功
[DEBUG] 加密器已创建
[DEBUG] 批处理编码器已创建
[DEBUG] 浮点数据已转换为整数: scale_factor=10000
[DEBUG] 数据长度 512 小于多项式模数4096，将填充
[DEBUG] 数据长度调整后: 4096
[DEBUG] 数据已编码为明文对象
[DEBUG] 明文已加密为密文对象
[DEBUG] 密文已保存并读取: 大小=88582字节
[DEBUG] 临时文件已清理
[DEBUG] 数据加密成功
[DEBUG] 数据加密完成，密文大小: 88582字节
[DEBUG] 加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
[DEBUG] 开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
[DEBUG] 成功读取私钥，大小: 70218字节
[DEBUG] 成功读取重线性化密钥，大小: 276836字节
[DEBUG] 成功读取Galois密钥，大小: 6070061字节
[DEBUG] 成功读取旧加密数据，大小: 88491字节
[DEBUG] 成功读取新加密数据，大小: 88582字节
[DEBUG] 调用混合同态加密比对函数
[DEBUG] 开始比较加密数据 - 使用混合同态加密实现
[DEBUG] 输入数据长度: data1=88491字节, data2=88582字节
[DEBUG] 私钥长度: 70218字节
[DEBUG] 重线性化密钥长度: 276836字节
[DEBUG] Galois密钥长度: 6070061字节
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文创建成功
[DEBUG] 创建临时目录: /tmp/tmplls75hbs
[DEBUG] 密钥保存到临时文件成功
[DEBUG] 私钥加载成功
[DEBUG] 重线性化密钥加载成功
[DEBUG] Galois密钥加载成功
[DEBUG] 密文数据保存到临时文件成功
[DEBUG] 密文加载成功
[DEBUG] 创建评估器成功
[DEBUG] 开始同态计算：计算密文向量的平方差
[DEBUG] 执行密文同态减法运算: diff = cipher1 - cipher2
[DEBUG] 执行密文同态平方运算和重线性化: squared_diff = diff²
[DEBUG] 解密器创建成功
[DEBUG] 解密平方差密文成功
[DEBUG] 解码平方差向量长度: 4096
[DEBUG] 同态计算的欧氏距离: 0.6416616398071494
[DEBUG] 解码原始向量长度: vec1=4096, vec2=4096
[DEBUG] 范数计算: norm1=0.9999992149996919, norm2=1.0000260496607076
[DEBUG] 最终相似度: 0.3208267671139156
[DEBUG] ***** 混合同态加密比较结果摘要 *****
[DEBUG] 同态计算的欧氏距离: 0.6416616398071494
[DEBUG] 归一化距离: 0.3208267671139156
[DEBUG] 最终相似度(距离值): 0.3208267671139156
[DEBUG] 向量1范数: 0.9999992149996919
[DEBUG] 向量2范数: 1.0000260496607076
[DEBUG] *********************************
[DEBUG] 临时文件清理完成
[DEBUG] 比对完成，结果: 0.3208267671139156
[DEBUG] 加密用户 20250324151804bdu6aefzbYqRzD5 的 old 类型数据
[DEBUG] 已加载原始人脸数据，向量长度: 512
[DEBUG] 已加载公钥，大小: 134106字节
[DEBUG] 开始加密数据 - 数据长度: 512
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文已创建
[DEBUG] 临时目录已创建: /tmp/tmpaqwhejj_
[DEBUG] 公钥已保存到临时文件: /tmp/tmpaqwhejj_/public_key.key
[DEBUG] 公钥加载成功
[DEBUG] 加密器已创建
[DEBUG] 批处理编码器已创建
[DEBUG] 浮点数据已转换为整数: scale_factor=10000
[DEBUG] 数据长度 512 小于多项式模数4096，将填充
[DEBUG] 数据长度调整后: 4096
[DEBUG] 数据已编码为明文对象
[DEBUG] 明文已加密为密文对象
[DEBUG] 密文已保存并读取: 大小=88541字节
[DEBUG] 临时文件已清理
[DEBUG] 数据加密成功
[DEBUG] 数据加密完成，密文大小: 88541字节
[DEBUG] 加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.old
[DEBUG] 加密用户 20250324151804bdu6aefzbYqRzD5 的 new 类型数据
[DEBUG] 已加载原始人脸数据，向量长度: 512
[DEBUG] 已加载公钥，大小: 134106字节
[DEBUG] 开始加密数据 - 数据长度: 512
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文已创建
[DEBUG] 临时目录已创建: /tmp/tmpnzii0cvz
[DEBUG] 公钥已保存到临时文件: /tmp/tmpnzii0cvz/public_key.key
[DEBUG] 公钥加载成功
[DEBUG] 加密器已创建
[DEBUG] 批处理编码器已创建
[DEBUG] 浮点数据已转换为整数: scale_factor=10000
[DEBUG] 数据长度 512 小于多项式模数4096，将填充
[DEBUG] 数据长度调整后: 4096
[DEBUG] 数据已编码为明文对象
[DEBUG] 明文已加密为密文对象
[DEBUG] 密文已保存并读取: 大小=88504字节
[DEBUG] 临时文件已清理
[DEBUG] 数据加密成功
[DEBUG] 数据加密完成，密文大小: 88504字节
[DEBUG] 加密数据保存成功: ./application/data/encryptUserFaceData/20250324151804bdu6aefzbYqRzD5.new
[DEBUG] 开始处理人脸比对，用户ID: 20250324151804bdu6aefzbYqRzD5
[DEBUG] 成功读取私钥，大小: 70218字节
[DEBUG] 成功读取重线性化密钥，大小: 276836字节
[DEBUG] 成功读取Galois密钥，大小: 6070061字节
[DEBUG] 成功读取旧加密数据，大小: 88541字节
[DEBUG] 成功读取新加密数据，大小: 88504字节
[DEBUG] 调用混合同态加密比对函数
[DEBUG] 开始比较加密数据 - 使用混合同态加密实现
[DEBUG] 输入数据长度: data1=88541字节, data2=88504字节
[DEBUG] 私钥长度: 70218字节
[DEBUG] 重线性化密钥长度: 276836字节
[DEBUG] Galois密钥长度: 6070061字节
[DEBUG] 加密参数已设置: scheme=BFV, poly_modulus_degree=4096
[DEBUG] SEAL上下文创建成功
[DEBUG] 创建临时目录: /tmp/tmpgd3_9i9l
[DEBUG] 密钥保存到临时文件成功
[DEBUG] 私钥加载成功
[DEBUG] 重线性化密钥加载成功
[DEBUG] Galois密钥加载成功
[DEBUG] 密文数据保存到临时文件成功
[DEBUG] 密文加载成功
[DEBUG] 创建评估器成功
[DEBUG] 开始同态计算：计算密文向量的平方差
[DEBUG] 执行密文同态减法运算: diff = cipher1 - cipher2
[DEBUG] 执行密文同态平方运算和重线性化: squared_diff = diff²
[DEBUG] 解密器创建成功
[DEBUG] 解密平方差密文成功
[DEBUG] 解码平方差向量长度: 4096
[DEBUG] 同态计算的欧氏距离: 0.6310726820264049
[DEBUG] 解码原始向量长度: vec1=4096, vec2=4096
[DEBUG] 范数计算: norm1=0.9999992149996919, norm2=0.9999870499161476
[DEBUG] 最终相似度: 0.31553850798718397
[DEBUG] ***** 混合同态加密比较结果摘要 *****
[DEBUG] 同态计算的欧氏距离: 0.6310726820264049
[DEBUG] 归一化距离: 0.31553850798718397
[DEBUG] 最终相似度(距离值): 0.31553850798718397
[DEBUG] 向量1范数: 0.9999992149996919
[DEBUG] 向量2范数: 0.9999870499161476
[DEBUG] *********************************
[DEBUG] 临时文件清理完成
[DEBUG] 比对完成，结果: 0.31553850798718397
